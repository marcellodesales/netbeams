<?xml version="1.0"?>
<project name="DSP Platform" default="all">
	<import file="../../../../build.xml" />
	
	<target name="all" depends="init, compile, jar" />
	
	<target name="init">
		<mkdir dir="${imported.basedir}/classes" />
	</target>
	
	<target name="compile">
		<javac destdir="${imported.basedir}/classes" debug="on" srcdir="${imported.basedir}/src">
	         <classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="jar">
	    
		<mkdir dir=".tmp/"/>
	        <copy todir=".tmp/">
	            <fileset dir="${THIRDPARTY}/apache" includes="*.jar"/>
	            <fileset dir="${THIRDPARTY}/jdom" includes="*.jar"/>
	        </copy>
	    
		<jar basedir="${imported.basedir}/classes"
			 jarfile="${DSP.RUNTIME}/DSPPlatform-${DSP.VERSION}.jar" 
			 compress="true" includes="**/*" 
			 manifest="${imported.basedir}/META-INF/MANIFEST.MF">

			<zipfileset dir=".tmp/" includes="*.jar" prefix="libs"/>
			
		</jar>
		
		<delete dir=".tmp/" />
	</target>
	
	<target name="clean">
		<delete dir="${imported.basedir}/classes" />
	</target>
</project>